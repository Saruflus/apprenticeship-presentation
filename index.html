<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Soutenance d'alternance - Merlin Simsen Baratault</title>

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Reveal.js CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/theme/white.css" id="theme">

  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css"> -->
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/monokai.min.css"> -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/tokyo-night-dark.min.css">

  <style>
    :root { --r-main-font: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
    body, .reveal { font-family: var(--r-main-font) !important; }
    .reveal h1, .reveal h2, .reveal h3 { font-weight: 800; letter-spacing: -0.025em; }
    .reveal p, .reveal li { font-weight: 450; }
    .logos { display: flex; justify-content: center; gap: 2rem; margin-top: 2rem; }
    .logos img { height: 80px; object-fit: contain; }
    .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; align-items: start; }
    .two-col img { width: 100%; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,.08); }
    #chart { width: 100%; height: 62vh; max-height: 720px; }
    .caption { color:#666; font-size: .9em; margin-top: .6rem; }
    .center { text-align:center; }
  </style>
</head>
<body>
<div class="reveal">
  <div class="slides">

    <!-- 1. TITRE -->
    <section>
      <p class="r-fit-text"><strong>SOUTENANCE D'ALTERNANCE</strong></p>
      <h3>Alternance au CEREDIH (Hôpital Necker, AP-HP)</h3>
      <p class="caption">missions, apports, compétences développées</p>
      <br>


      <p style="font-size: 0.7em; color: #666"><strong>Merlin Simsen Baratault</strong> - BUT3 SD EMS</p>
      <div class="logos">
        <img src="assets/LOGO_CEREDIH.png" alt="Logo du CEREDIH" />
        <img src="assets/LOGO_APHP.png" alt="Logo de l'AP-HP" />
        <img src="assets/LOGO_UPC.png" alt="Logo de l'Université Paris Cité" />
      </div>
    </section>



    <!-- 2. INTRODUCTION (1 slide) -->
    <section>
      <h1>Introduction</h1>
      <!-- <p><strong>Merlin Simsen Baratault</strong> - BUT3 Science des Données</p> -->
      <ul>
        <li>Alternance de 2 ans au CEREDIH</li>
        <li>Encadrants : Mickaël Alligon, Nizar Mahlaoui, François Montestruc</li>
        <li>Objectif : présenter mes <strong>missions</strong>, mes <strong>apports</strong>, et les <strong>compétences</strong> développées</li>
      </ul>
    </section>



    <!-- 3. CEREDIH (1 slides) -->
    <section>
      <h1>LE CEREDIH</h1>
        <div class="two-col">
          <div>
            <ul style="font-size: 1em;">
              <li>Crée en 2005 - Plan maladies rares</li>
              <li>Registre national <strong style="color: #0a4d9d;">> 10 000 patients</strong></li>
              <li><strong>Réseau français</strong> & européen (ESID)</li>
              <li>Collecte, analyse, valorisation</li>
            </ul>
          </div>
          <div>
            <ul style="font-size: 1em;">
              <li>Équipes : ARC, Docteurs, Data</li>
              <li>Mon rôle : alternant Data</li>
            </ul>
          </div>
        </div>
        <br>
    </section>



    <!-- 4. Service Data/Statistique (1 slide) -->
    <section>
      <h1>Service Data</h1>
      <ul>
        <li>2 personnes : Mickaël Alligon (Datamanager / Data analyst), moi (alternant)</li>
        <li>Rôle : gestion des données, analyses statistiques, valorisation (rapports, articles)</li>
        <li>Outils : R, R Markdown, Excel, PowerPoint</li>
      </ul>
      <p class="caption">Importance de la donnée de santé : qualité, confidentialité, volume</p>
    </section>



    <!-- 5. Aperçu global des missions (1 slide) -->
    <section>
      <h2>Aperçu de mes missions</h2>
      <br>
      <ul>
        <li><strong>Refonte du Data Management</strong> (optimisation, robustesse, lisibilité)</li>
        <li><strong>Modernisation</strong> du rapport d'activité & newsletter</li>
        <li>Rédaction d'un <strong>article méthodologique</strong> sur le modèle de <strong>Cox</strong></li>
      </ul>
    </section>



    <!-- 6. MISSION 1 (3 slides) -->
    <section>
      <section>
      <h2>Mission 1 - Refonte du Data Management</h2>
      <h4>Contexte & objectifs</h4>
      <ul>
        <li>Scripts historiques (~9000 lignes), compilation ~<strong>2h</strong>, erreurs fréquentes</li>
        <li>Objectifs : <strong>rapidité</strong>, <strong>robustesse</strong>, <strong>lisibilité</strong></li>
      </ul>
    </section>


    <!-- 7. MISSION 1 - Avant -->
    <section>
    <h2>Mission 1 - Avant</h2>
    <p style="font-size: 0.8em;">Analyse du script existant → remplacer boucles for()</p>
    <pre><code class="language-r" data-line-numbers="1-13|2|2,5|2,5,7|2,5,7,9"># Boucle lente et fragile
  for (i in 1:nrow(Esid))
  {
    x &lt; rep(NA, length(IG_date))
    for (j in &:length(IG_date))
    {
      if (as.character(Esid[i, IG_status[j]]) %in% "Y")
      {
        Esid$date_first_IG_replacement[i] &lt;- date_ceredih(Esid[i, IG_date[j]])
        break()
      }
    }
  }
  </code></pre>
    <p class="caption">Exemple de code: passages ligne par ligne, boucles imbriquées</p>
  </section>

      <!-- 8. MISSION 1 - Après -->
      <section>
        <h2>Mission 1 - Après</h2>
        <pre><code class="language-r" data-line-numbers="1-5|2"># Vectorisation claire et robuste
  Esid$date_first_IG_replacement &lt;- mapply(extract_element,
          which(is.na(Esid$first_ig_replacement)),
          Esid$first_ig_replacement[which(is.na(Esid$first_ig_replacement))],
          MoreArgs = list(base = Esid[, IG_date]))
  </code></pre>
        <ul>
          <li>Temps total réduit : <strong>~2h → ~15 min</strong></li>
          <li>Processus plus <strong>fiable</strong> & <strong>maintenable</strong></li>
          <li>Gain d’<strong>autonomie</strong> & réactivité pour l’équipe</li>
        </ul>
      </section>
    </section>
    



    <!-- 9. MISSION 2 (4 slides) -->
    <section>
      <section>
        <h2>Mission 2 - Rapport d'activité</h2>
        <h4>Contexte</h4>
        <br>
        <ul>
          <li>Peu lisible, graphiques figés, limites du format classique</li>
          <li>Objectifs : moderniser, rendre <strong>interactif</strong>, mieux valoriser les données</li>
        </ul>
      </section>
      
      <!-- 10. MISSION 2 avant -->
      <section>
        <h2>Avant</h2>
        <img src="assets/oldPlot.png" alt="Ancien rapport" style="max-height:56vh; margin-top:.8rem; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.08);" />
        <p class="caption" style="font-size: 1.2rem;">graphique présentant le nombre d'inclusion par année</p>
      </section>

      <!-- 11. MISSION 2 après -->
      <section>
        <h2>Après</h2>
        <div id="afterChart" class="center" style="width: 80%; height: 400px; margin: 0 auto; display: flex; justify-content: center; align-items: center;" aria-label="Graphique interactif Echarts4R (Apache ECharts)"></div>
        <p class="caption" style="font-size: 1.2rem;">Hover : détails • Légende : afficher/masquer • Toolbox : enregistrer en image</p>
      </section>
      
      <!-- 12. MISSION 2 autre exemple -->
      <section>
        <h4>Autre Exemple</h4>
        <div id="dipChart" style="width:100%; height:62vh; max-height:720px; margin-top:6rem;"></div>
      </section>

      <!-- 13. MISSION 2 résultat -->
      <section>
        <h2>Mission 2 - Résultats</h2>
        <ul>
          <li>Rapport <strong>interactif</strong> (≈70 pages) - utilisé en congrès</li>
          <li>Newsletter modernisée & personnalisable</li>
          <li>Ajout d'analyses (ex. <strong>courbes de survie</strong>)</li>
          <li>Meilleure valorisation du travail duCEREDIH</li>
        </ul>
      </section>
    </section>

    


    
    <!-- 14. MISSION 3 – Article COX (4 slides)  -->
    <section>
      <section>
        <h2>Mission 3 - Article sur Cox</h2>
        <p>Article méthodologique sur le modèle de Cox (guide pratique)</p>
        <ul>
          <li>Suite du papier sur <em>Kaplan-Meier</em></li>
          <li>Public: cliniciens non-statisticiens</li>
          <li>Objectif : expliquer les biais méthodologiques fréquents</li>
        </ul>
      </section>

    <!-- 15. MISSION 3 – Méthode  -->
      <section>
        <h2>Méthode</h2>
        <ul>
          <li>Simulation données</li>
          <li>Covariables: binaire (effet réel) + continue (sans effet)</li>
          <li>Introduction des biais: troncature, censure, risques compétitifs, événements récurrents, intéractions, non-proportionnalité</li>
          <li>Comparison modèles <strong>naïfs vs corrigés</strong></li>
        </ul>
      </section>

      <!-- 16. MISSION 3 – Illustrations -->
      <section>
        <!-- <h2>Illustrations</h2> -->
        <div class="two-col">
          <img src="assets/COXfalse.png" alt="Figure 1 - Illustration Cox" />
          <img src="assets/COXtrue.png" alt="Figure 2 - Illustration Cox" />
        </div>
        <p class="caption ocenter">Exemple sur l'intéraction, modèle naïf biaisé vs modèle corrigé</p>
      </section>
      
      <!-- 17. MISSION 3 – Résultats  -->
      <section>
        <h2>Mission 3 - Résultats</h2>
        <ul>
          <li>Article en cours de finalisation</li>
          <li>Outil pédagogique pour cliniciens</li>
          <li>Mise à disposition du code</li>
        </ul>
      </section>
    </section>



    <!-- 18. PORTFOLIO & BILAN – 3 slides -->
    <section>
      <section>
        <h2>Portfolio - Compétences du BUT SD</h2>
        <div class="two-col">
          <ul>
            <li><strong>Traiter des données</strong><br>
              <span style="color:#666;font-size: 1.8rem;">Refonte du Data Management, automatisation, qualité des données</span>
            </li>
            <li><strong>Analyser statistiquement</strong><br>
              <span style="color:#666;font-size: 1.8rem;">Analyses avancées, article sur le modèle de Cox, simulations</span>
            </li>
          </ul>
          <ul>
            <li><strong>Valoriser une production</strong><br>
              <span style="color:#666;font-size: 1.8rem;">Rapport d’activité interactif, newsletter modernisée</span>
            </li>
            <li><strong>Modéliser les données</strong><br>
              <span style="color:#666;font-size: 1.8rem;">Modèles de survie, gestion des biais, visualisations pédagogiques</span>
            </li>
          </ul>
        </div>
      </section>

      <!-- 19. PORTFOLIO – Compétences transversales -->
      <section>
        <h2>Compétences transversales</h2>
        <ul>
          <li>Autoformation (survie, simulation, visualisation)</li>
          <li>Gestion de projet (planification, suivi, évaluation)</li>
          <li>Communication interdisciplinaire (clinique ↔ data)</li>
          <li>Travail en équipe et rigueur scientifique</li>
        </ul>
      </section>

      <!-- 20. BILAN & PERSPECTIVES (1 slide) -->
      <section>
        <h2>Bilan & perspectives</h2>
        <ul>
          <li><strong>Techniques</strong> : R, data management, analyse de survie, dataviz interactive</li>
          <li><strong>Professionnelles</strong> : rigueur, vulgarisation scientifique, travail en équipe médicale</li>
          <li><strong>Impact personnel</strong> : confirmation de mon orientation professionnelle</li>
        </ul>
      </section>
    </section>

    <!-- 21. REMERCIEMENTS (1 slide) -->
    <section>
      <h2>Remerciements</h2>
      <div style="text-align:justify;">
        <p>Merci à toute l'équipe du CEREDIH pour leur accueil et leur accompagnement</p>
        <p>Merci à mes encadrants : Mickaël Alligon, Nizar Mahlaoui, François Montestruc</p>
        <p>Merci aux enseignants du BUT SD et à l'Université Paris Cité</p>
        <p>Merci à vous pour votre attention !</p>
      </div>
      <br>
      <h3 style="text-align:center;">Des questions&nbsp;?</h3>
    </section>

  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/highlight/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
<script>hljs.highlightAll();</script>
<script>
  // Reveal - config net et lisible; ajustez width/height si besoin
  const deck = new Reveal({
    hash: true,
    controls: true,
    controlsTutorial: false,
    progress: true,
    slideNumber: "h.c",
    showSlideNumber: 'all',
    transition: 'slide',
    history: true,
    hashOneBasedIndex: true,
    keyboard: true,
    autoAnimate: true,
    autoAnimateEasing: 'ease',
    autoAnimateDuration: 1.0,
    autoAnimateUnmatched: true,
    autoAnimateStyles: [
      'opacity',
      'color',
      'background-color',
      'padding',
      'font-size',
      'line-height',
      'letter-spacing',
      'border-width',
      'border-color',
      'border-radius',
      'outline',
      'outline-offset',
    ],
    mouseWheel: true,
    // Pour une netteté maximale sur grand écran, taille auto selon la taille du viewport:
    width: Math.min(1920, window.innerWidth * 0.85),
    height: Math.min(1080, window.innerHeight * 0.85),
    margin: 0.05,
    minScale: 1, maxScale: 1,
    plugins: [ RevealHighlight ]
  });
  deck.initialize();

  // ===== After chart (stacked like screenshot) =====
  let afterInstance;
  function buildAfterChart() {
    const el = document.getElementById('afterChart');
    if (!el) return;
    if (!afterInstance) {
      afterInstance = echarts.init(el, null, { renderer: 'svg', devicePixelRatio: window.devicePixelRatio || 1 });
    }

    const years = [
      '2005','2006','2007','2008','2009','2010','2011','2012','2013','2014',
      '2015','2016','2017','2018','2019','2020','2021','2022','2023','2024'
    ];

    // Données approximatives (à remplacer par tes vraies valeurs)
    const segGrey  = [520,470,820,430,360,420,520,380,340,360,420,320,260,290,310,260,300,340,360,330];
    const segYellow= [150,130,170,180,140, 80, 70,110, 90,120,130, 60, 40, 50, 70, 40, 60, 70, 80, 60];
    const segBlue  = [ 60, 80, 90, 40, 70, 30, 40, 70, 50, 60, 70, 40, 30, 40, 30, 30, 40, 70, 70, 40];

    const option = {
      title: { text: 'Nombre de patients par année', left: 'center' },
      color: ['#9e9e9e', '#f2c94c', '#1f78b4'],
      grid: { left: 60, right: 30, top: 60, bottom: 80 },
      tooltip: {
        trigger: 'axis',
        axisPointer: { type: 'shadow' },
        formatter: (params) => {
          const year = params[0].axisValue;
          let total = 0;
          params.forEach(p => total += p.value);
          const lines = params.map(p => {
            const pct = total ? ((p.value / total) * 100).toFixed(1) : 0;
            return `${p.marker} ${p.seriesName}: <b>${p.value}</b> (${pct}%)`;
          });
          return `<b>${year}</b><br/>Total: <b>${total}</b><br/>` + lines.join('<br/>');
        }
      },
      legend: { top: 28, left: 10, itemWidth: 14 },
      xAxis: {
        type: 'category',
        data: years,
        axisLabel: { rotate: 0, interval: 0 }
      },
      yAxis: {
        type: 'value',
        name: '',
        min: 0,
        max: 1250
      },
      series: [
        { name: 'Prevalent cases',   type: 'bar', stack: 'patients', data: segGrey,   barWidth: '70%', emphasis: { focus: 'series' } },
        { name: 'Included deceased',  type: 'bar', stack: 'patients', data: segYellow, emphasis: { focus: 'series' } },
        { name: 'Incident cases',   type: 'bar', stack: 'patients', data: segBlue,   emphasis: { focus: 'series' } }
      ]
    };

    afterInstance.setOption(option);
  }

  // ===== Complexe DIP chart =====
  let dipInstance;
  function buildDipChart() {
    const el = document.getElementById('dipChart');
    if (!el) return;
    if (!dipInstance) {
      dipInstance = echarts.init(el, null, { renderer: 'svg', devicePixelRatio: window.devicePixelRatio || 1 });
    }

    const years = ['2016','2017','2018','2019','2020','2021','2022','2023','2024','2025'];

    // Données factices par catégorie (DIP)
    const Bcell =    [120,135,150,170,165,180,190,205,210,220];
    const Tcell =    [ 80, 85, 92,100, 98,105,112,118,125,130];
    const Combined = [ 50, 55, 60, 68, 70, 75, 78, 82, 88, 92];
    const Phago =    [ 40, 42, 45, 47, 46, 50, 53, 55, 57, 60];
    const Complement=[ 18, 20, 22, 23, 24, 26, 27, 28, 30, 32];
    const earlyDx =  [ 42, 45, 47, 49, 52, 55, 58, 60, 63, 66]; // % < 2 ans

    const option = {
      title: { text: 'DIP - Cas annuels par catégorie & % diagnostic précoce' },
      color: ['#963484','#3066BE','#60AFFF','#28C2FF','#2AF5FF', '#FF5454'],
      grid: { left: 52, right: 60, top: 80, bottom: 70 },
      tooltip: {
        trigger: 'axis',
        axisPointer: { type: 'cross' },
        formatter: (params) => {
          const year = params[0].axisValue;
          let total = 0; let lines = [];
          params.forEach(p => { if (p.seriesType === 'bar') total += p.value; });
          params.forEach(p => {
            if (p.seriesType === 'bar') {
              const pct = total ? ((p.value/total)*100).toFixed(1) : 0;
              lines.push(`${p.marker} ${p.seriesName}: <b>${p.value}</b> (${pct}%)`);
            } else if (p.seriesType === 'line') {
              lines.push(`${p.marker} ${p.seriesName}: <b>${p.value}%</b>`);
            }
          });
          return `<b>${year}</b><br/>Total cas: <b>${total}</b><br/>` + lines.join('<br/>');
        }
      },
      legend: { type: 'scroll', top: 40 },
      toolbox: {
        feature: {
          dataZoom: {},
          dataView: { readOnly: true },
          restore: {},
          saveAsImage: {}
        },
        right: 10
      },
      xAxis: { type: 'category', boundaryGap: true, data: years },
      yAxis: [
        { type: 'value', name: 'Cas', min: 0 },
        { type: 'value', name: '% < 2 ans', min: 0, max: 100 }
      ],
      dataZoom: [ { type: 'slider', bottom: 20, start: 0, end: 100 }, { type: 'inside' } ],
      series: [
        { name: 'B-cell', type: 'bar', stack: 'cases', emphasis:{ focus:'series' }, data: Bcell },
        { name: 'T-cell', type: 'bar', stack: 'cases', emphasis:{ focus:'series' }, data: Tcell },
        { name: 'Combinées', type: 'bar', stack: 'cases', emphasis:{ focus:'series' }, data: Combined },
        { name: 'Phagocytaires', type: 'bar', stack: 'cases', emphasis:{ focus:'series' }, data: Phago },
        { name: 'Complément', type: 'bar', stack: 'cases', emphasis:{ focus:'series' }, data: Complement },
        {
          name: 'Diagnostic < 2 ans', type: 'line', yAxisIndex: 1, smooth: true,
          symbol: 'circle', symbolSize: 6, data: earlyDx,
          areaStyle: { opacity: 0.08 }
        }
      ],
      markArea: {
        itemStyle: { color: 'rgba(180,180,180,0.15)' },
        data: [ [ { xAxis: '2019' }, { xAxis: '2020', name: 'Changement de processus' } ] ]
      }
    };

    dipInstance.setOption(option);
  }

  // ===== Events =====
  deck.on('slidechanged', (e) => {
    if (e.currentSlide) {
      if (e.currentSlide.querySelector('#afterChart')) {
        buildAfterChart();
        setTimeout(() => afterInstance && afterInstance.resize(), 0);
      }
      if (e.currentSlide.querySelector('#dipChart')) {
        buildDipChart();
        setTimeout(() => dipInstance && dipInstance.resize(), 0);
      }
    }
  });

  window.addEventListener('load', () => {
    const simple = document.querySelector('#afterChart');
    const dip = document.querySelector('#dipChart');
    if (simple && simple.offsetParent !== null) buildAfterChart();
    if (dip && dip.offsetParent !== null) buildDipChart();
  });

  window.addEventListener('resize', () => {
    if (afterInstance) afterInstance.resize();
    if (dipInstance) dipInstance.resize();
  });
</script>
</body>
</html>
